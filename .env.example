################################################################################
# MANDATORY: Station Identity (CHANGE THESE)
################################################################################

# Station ID used for lock ownership and UI display
NEXT_PUBLIC_STATION_ID=CHANGE_ME_STATION_ID
# Server-side station identity (fallback when NEXT_PUBLIC_* unavailable)
STATION_ID=CHANGE_ME_STATION_ID

# Host identifiers used in Krosy payloads (e.g., <sourceHostname>, <targetHostName>)
NEXT_PUBLIC_KROSY_SOURCE_HOSTNAME=CHANGE_ME_HOSTNAME
NEXT_PUBLIC_KROSY_XML_TARGET=CHANGE_ME_HOSTNAME

################################################################################
# Mode (online/offline)
################################################################################

# true → online (use NEXT_PUBLIC_KROSY_URL_ONLINE)
# false → offline (use NEXT_PUBLIC_KROSY_URL_OFFLINE)
NEXT_PUBLIC_KROSY_ONLINE=true  # DO NOT CHANGE unless you need offline mode

################################################################################
# Krosy URLs & Connectivity
################################################################################

# Krosy endpoints used by Setup (pins/aliases extraction)
NEXT_PUBLIC_KROSY_URL_ONLINE=http://172.26.202.248:3000/api/krosy   # DO NOT CHANGE
NEXT_PUBLIC_KROSY_URL_OFFLINE=http://localhost:3000/api/krosy-offline  # DO NOT CHANGE

# Checkpoint endpoints (send workingDataXml or intksk)
NEXT_PUBLIC_KROSY_URL_CHECKPOINT_ONLINE=/api/krosy/checkpoint        # DO NOT CHANGE
NEXT_PUBLIC_KROSY_URL_CHECKPOINT_OFFLINE=/api/krosy-offline/checkpoint # DO NOT CHANGE

# Identity URL (GET) returning hostname/ip/mac for UI
NEXT_PUBLIC_KROSY_IDENTITY_URL=/api/krosy     # DO NOT CHANGE

# Network hints for online/offline decision (optional)
NEXT_PUBLIC_KROSY_IP_ONLINE=172.26.202.248    # DO NOT CHANGE
NEXT_PUBLIC_KROSY_IP_OFFLINE=192.168.1.164    # DO NOT CHANGE

# Offline forward target (proxy); used by /api/krosy-offline
NEXT_PUBLIC_KROSY_OFFLINE_TARGET_URL=http://localhost:3001/api/visualcontrol  # DO NOT CHANGE

# Client HTTP timeout for Krosy requests (ms)
NEXT_PUBLIC_KROSY_HTTP_TIMEOUT_MS=30000  # DO NOT CHANGE

# Server-side transport (TCP) for Krosy, if applicable
KROSY_TRANSPORT=tcp                 # DO NOT CHANGE
KROSY_TCP_PORT=10080                # DO NOT CHANGE
KROSY_TCP_TIMEOUT_MS=10000          # DO NOT CHANGE
KROSY_TCP_TERMINATOR=newline        # DO NOT CHANGE
KROSY_CONNECT_HOST=172.26.192.1     # DO NOT CHANGE
KROSY_LOG_DIR=.krosy-logs           # DO NOT CHANGE

# Optional VisualControl page used for debugging
NEXT_PUBLIC_KROSY_VISUALCONTROL_URL=http://localhost:3001/visualcontrol  # DO NOT CHANGE

# Allowed web client origins (server CORS)
KROSY_CLIENT_ORIGINS=http://172.26.202.248:3000,http://localhost:3000,http://localhost:3001,http://192.168.1.164:3001  # DO NOT CHANGE

################################################################################
# Locks (Redis)
################################################################################

# Redis connection URL
REDIS_URL=redis://127.0.0.1:6379   # DO NOT CHANGE

# Server policy: require Redis for lock endpoints
KSK_REQUIRE_REDIS=1                # DO NOT CHANGE

# Server default TTL for KSK locks (seconds)
KSK_DEFAULT_TTL_SEC=172800         # DO NOT CHANGE

# Client heartbeat TTL used by Setup page (seconds)
NEXT_PUBLIC_KSK_TTL_SEC=172800     # DO NOT CHANGE

# Extra terminal logging for /api/ksk-lock GET (detail rows)
KSK_LOCK_LOG_DETAIL=1              # DO NOT CHANGE

################################################################################
# Check Behavior
################################################################################

# How /api/serial/check builds the pins to send:
# mac|union|client|merge
CHECK_SEND_MODE=merge              # DO NOT CHANGE

# Additional CHECK timeouts and retry settings (ms)
CHECK_RESULT_TIMEOUT_MS=9000       # DO NOT CHANGE
CHECK_HANDSHAKE_TIMEOUT_MS=400     # DO NOT CHANGE
NEXT_PUBLIC_CHECK_CLIENT_TIMEOUT_MS=5000  # DO NOT CHANGE
NEXT_PUBLIC_CHECK_RETRY_COUNT=1    # DO NOT CHANGE

################################################################################
# ESP / Serial & Scanners
################################################################################

# Explicit ESP TTY path (prefer /dev/ttyUSB*)
ESP_TTY=/dev/ttyUSB0               # DO NOT CHANGE
ESP_TTY_PATH=/dev/ttyUSB0          # DO NOT CHANGE

# ESP health & PING
ESP_PING_CMD=PING {payload}        # DO NOT CHANGE

# Scanner device list (comma-separated)
SCANNER_TTY_PATHS=/dev/ttyACM0,/dev/ttyACM1  # DO NOT CHANGE
# Which indices each UI uses
NEXT_PUBLIC_SCANNER_INDEX_DASHBOARD=0        # DO NOT CHANGE
NEXT_PUBLIC_SCANNER_INDEX_SETUP=1            # DO NOT CHANGE
# Serial/scanner tuning
SCANNER_BAUD=9600                    # DO NOT CHANGE
SCANNER_OPEN_TIMEOUT_MS=4000         # DO NOT CHANGE
SCANNER_ALLOW_RAW_MAC=1              # DO NOT CHANGE
SCANNER_PRINTABLE_ONLY=0             # DO NOT CHANGE
NET_IFACE=eth0                       # DO NOT CHANGE

################################################################################
# UI Behavior & Patterns
################################################################################

# Hide settings page link in UI
NEXT_PUBLIC_HIDE_SETTINGS=true       # DO NOT CHANGE

# KFB (MAC) regex accepted by inputs
NEXT_PUBLIC_KFB_REGEX=/^([0-9A-F]{2}([:\\-]?)){5}[0-9A-F]{2}$/i  # DO NOT CHANGE

# Setup behavior flags
NEXT_PUBLIC_SETUP_ALLOW_NO_ESP=0     # DO NOT CHANGE
NEXT_PUBLIC_KEEP_LOCKS_ON_UNLOAD=0   # DO NOT CHANGE
NEXT_PUBLIC_KSK_REQUIRE_REDIS=1      # DO NOT CHANGE IMPORTANT

################################################################################
# Logging
################################################################################

# Enable file logging and directory/name
LOG_ENABLE=1                        # CHANGE to 0 to disable app logging
LOG_DIR=./logs                      # DO NOT CHANGE
LOG_FILE_BASENAME=app               # DO NOT CHANGE

# Console log level (debug|info|warn|error)
LOG_LEVEL=debug                     # DO NOT CHANGE

# Monitor-only modes
LOG_MONITOR_ONLY=0                  # DO NOT CHANGE
LOG_MONITOR_START_ONLY=0            # DO NOT CHANGE

# Optional per-tag minimum levels (comma-separated list)
# Example: redis=warn,ksk-lock=warn
# LOG_TAG_LEVELS=
LOG_TAG_LEVELS=scanner=debug,scan:sink=info,scan:mem=info,api:serial/scanner=info,api:serial/events=info  # DO NOT CHANGE

# Verbose scan diagnostics (client and server hints)
SCAN_LOG=1                          # DO NOT CHANGE
NEXT_PUBLIC_SCAN_LOG=1              # DO NOT CHANGE
SCAN_MEM_LOG=1                      # DO NOT CHANGE
LOG_SCANNER_POLL_VERBOSE=1          # DO NOT CHANGE

################################################################################
# Misc / Legacy
################################################################################

# Force checkpoint status for testing (ok|true|1)
KROSY_FORCE_CHECKPOINT_RESULT=ok    # DO NOT CHANGE

# Legacy (kept for reference)
KROSY_XML_TARGET=ksskkfb01          # DO NOT CHANGE
KROSY_OFFLINE_PORT=3001             # DO NOT CHANGE
KROSY_OFFLINE_PATH=/api/visualcontrol  # DO NOT CHANGE
KROSY_OGLIEN_URL=http://localhost:3001/api/visualcontrol  # DO NOT CHANGE
